<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0054)https://csil.cs.uchicago.edu/minicourses/Security.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Austin Byers">
  <meta name="author" content="John Lekberg">
  <meta name="date" content="2015-10-21">
  <title>Security Exploits</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="./Introduction to Security Exploits_files/minicourses.css" type="text/css">
</head>
<body>
<div id="header">
<h1 class="title">Security Exploits</h1>
<h2 class="author">Austin Byers</h2>
<h2 class="author">John Lekberg</h2>
<h3 class="date">2015-10-21</h3>
</div>
<h1 id="introduction">Introduction</h1>
<p>Cyber-attacks are some of the most common and fastest-growing crimes. Every day we hear about another vulnerable website that is compromised by black-hat hackers. There don't seem to be very many websites left unhacked.</p>
<p>Many of these attacks come from large, coordinated groups such as government agencies or Anonymous. But many cyber-attacks are not as difficult as they seem. <em>Most exploitation tools are free and open source. Anyone with a computer can quickly learn how to use them.</em></p>
<h1 id="warning-and-disclaimer">Warning and Disclaimer</h1>
<p>Before we get started:</p>
<p><strong>Any unauthorized attempt to access a computer system is illegal.</strong></p>
<p>Admittedly, it's fun to hack computers! The tools presented herein are legal when they are used on one's own system. There are security professionals known as "penetration tester" that companies pay to try to break into their systems. Do <strong>not</strong> use these tools on systems unless you have explicit (written) permission.</p>
<div class="figure">
<img src="./Introduction to Security Exploits_files/DataBreaches.png" title="World&#39;s biggest data breaches 2011-2014" alt="World&#39;s biggest data breaches 2011-2014"><p class="caption">World's biggest data breaches 2011-2014</p>
</div>
<h1 id="web-attacks">Web attacks</h1>
<p>By design, websites are available to the world. They have many forms for user input: login-, purchase-, and feedback-forms. This exposure provides a large attack surface. It's possible to input malformed data and crash the website or divulge confidential data.</p>
<h2 id="demo---sql-injection">Demo - SQL Injection</h2>
<p>Structured Query Language (SQL) is the foundation for many back-end databases on websites---like MySQL---especially for login forms. It's powerful, but if we expose that power to users, the results are catastrophic.</p>
<p>Here is a great SQL Injection interactive demo: <a href="http://www.codebashing.com/sql_demo">http://www.codebashing.com/sql_demo</a></p>
<p>This presents a username and password login form and shows you the query that runs when you log in:</p>
<pre class="sourceCode SQL"><code class="sourceCode sql"><span class="kw">SELECT</span> * <span class="kw">FROM</span> users <span class="kw">WHERE</span> email = <span class="st">'$email'</span> <span class="kw">AND</span>
   (password_hash = <span class="st">'$password'</span>) <span class="kw">LIMIT</span> <span class="dv">1</span></code></pre>
<p>But if the user enters <code>' OR 1=1)#</code> for <code>$password</code>:</p>
<pre class="sourceCode SQL"><code class="sourceCode sql"><span class="kw">SELECT</span> * <span class="kw">FROM</span> users <span class="kw">WHERE</span> email = <span class="st">'$email'</span> <span class="kw">AND</span>
   (password_hash = <span class="st">''</span> <span class="kw">OR</span> <span class="dv">1</span> =<span class="dv">1</span> )#<span class="st">') LIMIT 1</span></code></pre>
<p>What's going on? <code>'</code> acts as a string delimiter, and <code>#</code> marks comments. <code>(1=1)</code> is always true, so the above query is equivalent to:</p>
<pre class="sourceCode SQL"><code class="sourceCode sql"><span class="kw">SELECT</span> * <span class="kw">FROM</span> users <span class="kw">WHERE</span> email = <span class="st">'$email'</span></code></pre>
<p>The attacker only needs the right email to access the database! But she can do much more with SQL injection than just read database rows.</p>
<div class="figure">
<img src="./Introduction to Security Exploits_files/XKCD.png" title="XKCD: &quot;Exploits of a Mom&quot;" alt="Xkcd"><p class="caption">Xkcd</p>
</div>
<p>Sony, Harvard, Stanford, Microsoft, 7-Eleven, Barracuda Networks, and The Pirate Bay Known are all victims of SQL injection.</p>
<p>Sanitizing the user's input <a href="https://csil.cs.uchicago.edu/minicourses/Security.html#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> helps, but still is vulnerable to sophisticated injections. The best defense against SQL injection is to define all the SQL code in advance, and pass in the user data separately <a href="https://csil.cs.uchicago.edu/minicourses/Security.html#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>.</p>
<h2 id="other-web-attacks">Other Web Attacks</h2>
<p>So many exploits, so little time! If something strikes your fancy, feel free to look it up or ask me about it after the presentation:</p>
<dl>
<dt>Cross-site-scripting (XSS)</dt>
<dd>Allows attackers to inject script code (similar to SQL injection). The site executes code that didn't originate it. For example, a user might type:
</dd>
</dl>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;script&gt;</span><span class="fu">alert</span>(<span class="st">"XSS Vulnerability!"</span>)&lt;<span class="ot">/script&gt;</span></code></pre>
<dl>
<dt>Cross-site Request Forgery (CSRF)</dt>
<dd><p>Tricks victim into loading a page containing malicious requests. This allows the attacker to steal the victim's credentials</p>
</dd>
<dt>Distributed Denial of Service (DDOS)</dt>
<dd><p>Overwhelms the target with a flood of network packets. A popular and free DDOS program is the Low Orbit Ion Cannon (LOIC).</p>
</dd>
</dl>
<h1 id="background-virtual-machines-and-kali">Background: Virtual Machines and Kali</h1>
<div class="figure">
<img src="./Introduction to Security Exploits_files/Kali.png" title="Kali: The quieter you become, the more you are able to hear." alt="Kali"><p class="caption">Kali</p>
</div>
<p>When we exploit a computer---as opposed to a website---we attack from within a virtual machine running the "Kali" operating system.</p>
<p>A "virtual machine" is an encoding of a computer's operating system into a kind of program that can be run from another computer. My Windows laptop hosts a variety of Linux virtual machines. They think they have their own hard drives and memory, but they really just write to files on my Windows machine. VMWare Player and VirtualBox are two free virtualization programs.</p>
<p>Virtual machines allow you to run several different operating systems simultaneously and provide a sandboxed environment that isolates each machine. Thus, you can safely practice penetration testing on VMs.</p>
<p>Kali is penetration testers' VM of choice. It brims with vulnerability scanners, password crackers, hardware hacks, network sniffers and spoofers, exploitation tools, social engineering toolkits, rootkit modules, wireless attacks, and forensics analysis tools! It's completely free!</p>
<p>I will often switch between Windows and Kali. Think of these as two different computers, even though they run on the same machine.</p>
<h1 id="remote-exploitation-via-social-engineering">Remote Exploitation via Social Engineering</h1>
<p>Suppose you inject SQL into a bank website to download usernames and passwords and discover the bank's head of security is in the database. She has access to the bank's internal security systems! You will need her password in order to breach the system. You may crack her password from the database, but she probably uses a different password for the security system.</p>
<p>We need a way to take remote control of her personal computer! If we record her keystrokes, then we can figure out her password. We convince her to visit a malicious website which will download code to take over her computer.</p>
<p>This is <em>social engineering</em>---manipulating a person's behavior so that they do something they would not otherwise have done. People are usually the weakest link in most systems, making them prime targets. If you can get someone to give up their password or click on the wrong link---even if they have the most secure system---they've compromised themselves.</p>
<div class="figure">
<img src="./Introduction to Security Exploits_files/SET.png" title="Social Engineer Toolkit" alt="Social Engineer Toolkit"><p class="caption">Social Engineer Toolkit</p>
</div>
<p>Kali provides the "Social Engineer Toolkit." This tool is literally "hack by number." We are going to use the following options:</p>
<ul>
<li><code>1</code> Social Engineering Attacks</li>
<li><code>2</code> Website Attack vectors</li>
<li><code>1</code> Java Applet Attack Method</li>
<li><code>2</code> Site Cloner (facebook.com)</li>
<li><code>2</code> Use the applet built into SET</li>
<li><code>2</code> Windows Reverse_TCP Meterpreter</li>
<li><code>4</code> Backdoored executable.</li>
</ul>
<div class="figure">
<img src="./Introduction to Security Exploits_files/Fakebook.png" title="Fakebook" alt="Fakebook"><p class="caption">Fakebook</p>
</div>
<p>After just 7 keystrokes, we've created a copy of the Facebook login page with an embedded Java applet to take over the victim's computer. If we convince the victim of the applet's authenticity<a href="https://csil.cs.uchicago.edu/minicourses/Security.html#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>, then the attacker owns their computer.</p>
<p>It's game over. The applet will run with the victim's permissions, which means the attacker will likely have full administrator privileges. The attacker can read and modify the victim's computer, record keystrokes, and even take pictures with the webcam! The victim won't even notice until it's too late.</p>
<h1 id="password-cracking">Password Cracking</h1>
<p>Suppose an attacker injects SQL to download a website's password database---a common scenario. If it were stored in plaintext, the attacker would immediately have everyone's password! Fortunately, most websites store hashed passwords. A hash is a one-way function that turns arbitrary strings into a fixed-length, random-looking string of characters.</p>
<p>The hash function is not invertable, but attackers can compute hashes of the most common passwords and check for matching hashes in the database. If the database has millions of entries, it's extremely likely that the attacker will crack a number of the passwords. Most people use the same password for multiple websites, which lets the attacker steal emails, credit card numbers and bank records.</p>
<p>Here is an example password file (/etc/shadow) for four users on my Kali VM:</p>
<pre><code>bill:$6$cQeGvnZq$UYvKMqZBme9Uf/w.shXlNkJqDOTByz35WeWY5n
DKFcklVUBY0Ur9tD96REqmLQBSAJudt.VL2hDnLmj1HVlna0:16356:
0:99999:7:::

hacker:$6$VdVNvW35$4QVeYp2k3LCSF9yN/sJYXmP7mF/yC.YmjT41
S/pjCn6S1dpv2PHWnhbTXeEd8U945GMyyA/oBdpUaEdwITAI.1:1635
6:0:99999:7:::

erica:$6$fFc1cM4z$s24WX5nVNG4HF1Ota2Zxs7eJltSnM2Veui6JE
2cge1rDRJDrMPw4DdVvGsf/W1r8kJg6HEGR05pByUxmvWcEu1:16356
:0:99999:7:::

bankowner:$6$DqDAUCSf$HQuODsCCmX758WDhwnoNW7CR8r7sopYT5
/fK2k5Ki4oxZ.pyeL5L8TyH6iVYwrdVMMCZK2Cx6i.dJeUPndaBi/:1
6356:0:99999:7:::</code></pre>
<p>We break these passwords with <code>john</code> (the ripper), a pre-installed tool on Kali. The command is:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">john</span> -users=erica,hacker,bill,bankowner /etc/shadow</code></pre>
<p><code>john</code> intelligently guesses passwords which are combinations of numbers, dictionary words, and names. On my machine, <code>john</code> can compute up to 435 hashes per second and is able to break all four passwords under than 10 minutes.</p>
<p>Press space or enter while <code>john</code> is running and you see which passwords it's trying at that moment. <code>john</code> quickly cracks all kinds of passwords, even long and complicated ones like <code>bankowner9999923</code>. Notice that <code>john</code> cracked bill's password (<code>Bill7</code>) in about 3 seconds. <a href="https://csil.cs.uchicago.edu/minicourses/Security.html#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a></p>
<h2 id="defending-against-password-attacks">Defending against Password Attacks</h2>
<dl>
<dt>Use a different password for every site!</dt>
<dd><p>Even if one site is compromised, then your data on other sites remains safe. Password managers like LastPass or KeePass generate different, secure passwords for each site and manage your passwords in a central vault.</p>
</dd>
<dt>Have good password hygiene!</dt>
<dd><p>Make sure passwords are at least 10 characters and include numbers or special characters. Make passwords out of phrases: "My favorite class is Computer Security at 10:30" might become the password <code>MfciCS@10:30</code>, which is very hard to break.</p>
</dd>
<dt>Use two-factor authentication!</dt>
<dd><p>Many services (including Google) allow two-factor authentication. You enter both your password and a pseudo-randomly generated code from your phone. Even if an attacker cracks your password, they don't have account access.</p>
</dd>
</dl>
<h1 id="metasploit">Metasploit</h1>
<p>Metasploit is another useful program. The attacker exploits vulnerabilities in servers with Metasploit and network scanners.</p>
<p>Metasploit requires a bit more finesse , but it is the de facto exploit repository available to hackers. In fact, the Social Engineering Toolkit used earlier is built on top of metasploit. If you want to practice using metasploit, there is a free virtual machine called “Metasploitable 2” which is intentionally vulnerable to these kinds of attacks.</p>
<p>Exploits in Metasploit take advantage of vulnerabilities discovered in older versions of services. The server might use an older version of Apache with a known buffer overflow vulnerability. <em>Protect your servers against remote exploits by keeping the server's software up to date.</em></p>
<h1 id="conclusion">Conclusion</h1>
<p>We gained unauthorized access to a website's database, cracked the passwords, and completely control the victim's computer in the span of 30-45 minutes. All of the tools we used are legal, free, easy to use, and widely available.</p>
<p>These attacks are unlikely to succeed like this in real life. It requires more ingenuity by hackers to avoid security restrictions like anti-virus software. But hopefully you have a sense of the wide range of exploit tools that can turn even a novice hacker into a security nightmare. We must continue to be extremely vigilant about cyber-attacks, and build technologies that are one step ahead of the ever-present hackers.</p>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Escaping non-alphanumeric characters.<a href="https://csil.cs.uchicago.edu/minicourses/Security.html#fnref1">↩</a></p></li>
<li id="fn2"><p>"parameterized queries"<a href="https://csil.cs.uchicago.edu/minicourses/Security.html#fnref2">↩</a></p></li>
<li id="fn3"><p>Notice the applet's name!<a href="https://csil.cs.uchicago.edu/minicourses/Security.html#fnref3">↩</a></p></li>
<li id="fn4"><p>I won't give away all the passwords here – try it yourself! You can copy the hashes into a different file and set John loose on it.<a href="https://csil.cs.uchicago.edu/minicourses/Security.html#fnref4">↩</a></p></li>
</ol>
</div>


</body></html>